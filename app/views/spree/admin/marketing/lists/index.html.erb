<% content_for :page_title do %>
  <%= "Lists" %>
<% end %>

<% @lists.each do |sub_class_lists| %>
  <% lists = sub_class_lists %>
  <% sub_class = sub_class_lists.class.to_s.deconstantize.constantize %>
  <% sub_class_name = sub_class_lists.class.to_s.deconstantize.demodulize.underscore.humanize %>
  <h4>
    <%= sub_class::NAME_PRESENTER %>
    <span class="icon icon-question-sign" data-toggle="tooltip" title="<%= sub_class::TOOLTIP_CONTENT %>"></span>
  </h4>
  <% if lists.present? %>
    <table class="table">
      <thead>
        <th class="col-md-5"><%= Spree::Marketing::List.human_attribute_name :name %></th>
        <th class="col-md-4"><%= Spree::Marketing::List.human_attribute_name :uid %></th>
        <th class="col-md-3 text-center"><%= Spree.t(:no_of_contacts) %></th>
      </thead>
      <tbody>
        <% lists.each do |list| %>
          <% list_presenter = list.presents %>
          <tr>
            <td class="col-md-5"><%= link_to list_presenter.name, admin_marketing_list_path(list) %></td>
            <td class="col-md-4"><%= list.uid %></td>
            <td class="col-md-3 text-center"><%= list.contacts.count %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <div class="alert alert-info no-objects-found">
      <%= Spree.t(:no_resource_found, resource: sub_class_name.remove(" list")) %>
    </div>
  <% end %>
  <br>
<% end %>
